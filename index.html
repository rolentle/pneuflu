<html>
<head>
  <title>PneuFlu</title>
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
  <script src="data_2015.js"></script>
  <script src="datamaps.usa.min.js"></script>
  <script src="lib/bubble_builder.js"></script>
  <script src="lib/element_builder.js"></script>
  <script src="lib/data_formatter.js"></script>
</head>
<body>
  <h1>Pneumonia or Influenza Deaths in the 122 Largest Cities For 2014</h1>
  <h2 id="week_title"></h2>
  <div id="container" style="position: relative; width: 1000px; height: 600px;"></div>
  <script>
    var map = new Datamap({
      element: document.getElementById('container'),
      scope: 'usa'
    });

    d3.json('./data_2014.json',function(data){
       city_data = data_for_cities(data);
       var bubbleScale = d3.scale.linear()
                                 .domain(d3.extent(city_data, function(datum) {
                                           return datum.all_causes_by_age_years_all_ages;
                                 }))
                                 .range(["white", "red"]);
      var default_week_number = 1;
      var week_1_data = filter_by_week(city_data, default_week_number);
      setTitle(default_week_number);
      setBubbles(map, week_1_data, bubbleScale);
      buildSelector(city_data, map, bubbleScale);
    });
  </script>
</body>
</html>
